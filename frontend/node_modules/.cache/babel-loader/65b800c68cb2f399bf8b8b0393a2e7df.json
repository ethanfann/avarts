{"ast":null,"code":"import { invariant, InvariantError } from 'ts-invariant';\nimport { valueToObjectRepresentation } from \"./storeUtils.js\";\nexport function checkDocument(doc) {\n  process.env.NODE_ENV === \"production\" ? invariant(doc && doc.kind === 'Document', 44) : invariant(doc && doc.kind === 'Document', \"Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a \\\"gql\\\" tag? http://docs.apollostack.com/apollo-client/core.html#gql\");\n  var operations = doc.definitions.filter(function (d) {\n    return d.kind !== 'FragmentDefinition';\n  }).map(function (definition) {\n    if (definition.kind !== 'OperationDefinition') {\n      throw process.env.NODE_ENV === \"production\" ? new InvariantError(45) : new InvariantError(\"Schema type definitions not allowed in queries. Found: \\\"\" + definition.kind + \"\\\"\");\n    }\n\n    return definition;\n  });\n  process.env.NODE_ENV === \"production\" ? invariant(operations.length <= 1, 46) : invariant(operations.length <= 1, \"Ambiguous GraphQL document: contains \" + operations.length + \" operations\");\n  return doc;\n}\nexport function getOperationDefinition(doc) {\n  checkDocument(doc);\n  return doc.definitions.filter(function (definition) {\n    return definition.kind === 'OperationDefinition';\n  })[0];\n}\nexport function getOperationName(doc) {\n  return doc.definitions.filter(function (definition) {\n    return definition.kind === 'OperationDefinition' && definition.name;\n  }).map(function (x) {\n    return x.name.value;\n  })[0] || null;\n}\nexport function getFragmentDefinitions(doc) {\n  return doc.definitions.filter(function (definition) {\n    return definition.kind === 'FragmentDefinition';\n  });\n}\nexport function getQueryDefinition(doc) {\n  var queryDef = getOperationDefinition(doc);\n  process.env.NODE_ENV === \"production\" ? invariant(queryDef && queryDef.operation === 'query', 47) : invariant(queryDef && queryDef.operation === 'query', 'Must contain a query definition.');\n  return queryDef;\n}\nexport function getFragmentDefinition(doc) {\n  process.env.NODE_ENV === \"production\" ? invariant(doc.kind === 'Document', 48) : invariant(doc.kind === 'Document', \"Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a \\\"gql\\\" tag? http://docs.apollostack.com/apollo-client/core.html#gql\");\n  process.env.NODE_ENV === \"production\" ? invariant(doc.definitions.length <= 1, 49) : invariant(doc.definitions.length <= 1, 'Fragment must have exactly one definition.');\n  var fragmentDef = doc.definitions[0];\n  process.env.NODE_ENV === \"production\" ? invariant(fragmentDef.kind === 'FragmentDefinition', 50) : invariant(fragmentDef.kind === 'FragmentDefinition', 'Must be a fragment definition.');\n  return fragmentDef;\n}\nexport function getMainDefinition(queryDoc) {\n  checkDocument(queryDoc);\n  var fragmentDefinition;\n\n  for (var _i = 0, _a = queryDoc.definitions; _i < _a.length; _i++) {\n    var definition = _a[_i];\n\n    if (definition.kind === 'OperationDefinition') {\n      var operation = definition.operation;\n\n      if (operation === 'query' || operation === 'mutation' || operation === 'subscription') {\n        return definition;\n      }\n    }\n\n    if (definition.kind === 'FragmentDefinition' && !fragmentDefinition) {\n      fragmentDefinition = definition;\n    }\n  }\n\n  if (fragmentDefinition) {\n    return fragmentDefinition;\n  }\n\n  throw process.env.NODE_ENV === \"production\" ? new InvariantError(51) : new InvariantError('Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.');\n}\nexport function getDefaultValues(definition) {\n  var defaultValues = Object.create(null);\n  var defs = definition && definition.variableDefinitions;\n\n  if (defs && defs.length) {\n    defs.forEach(function (def) {\n      if (def.defaultValue) {\n        valueToObjectRepresentation(defaultValues, def.variable.name, def.defaultValue);\n      }\n    });\n  }\n\n  return defaultValues;\n}","map":{"version":3,"sources":["../../../src/utilities/graphql/getFromAST.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { invariant, InvariantError } from 'ts-invariant';\nimport { valueToObjectRepresentation } from \"./storeUtils.js\";\nexport function checkDocument(doc) {\n    process.env.NODE_ENV === \"production\" ? invariant(doc && doc.kind === 'Document', 44) : invariant(doc && doc.kind === 'Document', \"Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a \\\"gql\\\" tag? http://docs.apollostack.com/apollo-client/core.html#gql\");\n    var operations = doc.definitions\n        .filter(function (d) { return d.kind !== 'FragmentDefinition'; })\n        .map(function (definition) {\n        if (definition.kind !== 'OperationDefinition') {\n            throw process.env.NODE_ENV === \"production\" ? new InvariantError(45) : new InvariantError(\"Schema type definitions not allowed in queries. Found: \\\"\" + definition.kind + \"\\\"\");\n        }\n        return definition;\n    });\n    process.env.NODE_ENV === \"production\" ? invariant(operations.length <= 1, 46) : invariant(operations.length <= 1, \"Ambiguous GraphQL document: contains \" + operations.length + \" operations\");\n    return doc;\n}\nexport function getOperationDefinition(doc) {\n    checkDocument(doc);\n    return doc.definitions.filter(function (definition) { return definition.kind === 'OperationDefinition'; })[0];\n}\nexport function getOperationName(doc) {\n    return (doc.definitions\n        .filter(function (definition) {\n        return definition.kind === 'OperationDefinition' && definition.name;\n    })\n        .map(function (x) { return x.name.value; })[0] || null);\n}\nexport function getFragmentDefinitions(doc) {\n    return doc.definitions.filter(function (definition) { return definition.kind === 'FragmentDefinition'; });\n}\nexport function getQueryDefinition(doc) {\n    var queryDef = getOperationDefinition(doc);\n    process.env.NODE_ENV === \"production\" ? invariant(queryDef && queryDef.operation === 'query', 47) : invariant(queryDef && queryDef.operation === 'query', 'Must contain a query definition.');\n    return queryDef;\n}\nexport function getFragmentDefinition(doc) {\n    process.env.NODE_ENV === \"production\" ? invariant(doc.kind === 'Document', 48) : invariant(doc.kind === 'Document', \"Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a \\\"gql\\\" tag? http://docs.apollostack.com/apollo-client/core.html#gql\");\n    process.env.NODE_ENV === \"production\" ? invariant(doc.definitions.length <= 1, 49) : invariant(doc.definitions.length <= 1, 'Fragment must have exactly one definition.');\n    var fragmentDef = doc.definitions[0];\n    process.env.NODE_ENV === \"production\" ? invariant(fragmentDef.kind === 'FragmentDefinition', 50) : invariant(fragmentDef.kind === 'FragmentDefinition', 'Must be a fragment definition.');\n    return fragmentDef;\n}\nexport function getMainDefinition(queryDoc) {\n    checkDocument(queryDoc);\n    var fragmentDefinition;\n    for (var _i = 0, _a = queryDoc.definitions; _i < _a.length; _i++) {\n        var definition = _a[_i];\n        if (definition.kind === 'OperationDefinition') {\n            var operation = definition.operation;\n            if (operation === 'query' ||\n                operation === 'mutation' ||\n                operation === 'subscription') {\n                return definition;\n            }\n        }\n        if (definition.kind === 'FragmentDefinition' && !fragmentDefinition) {\n            fragmentDefinition = definition;\n        }\n    }\n    if (fragmentDefinition) {\n        return fragmentDefinition;\n    }\n    throw process.env.NODE_ENV === \"production\" ? new InvariantError(51) : new InvariantError('Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.');\n}\nexport function getDefaultValues(definition) {\n    var defaultValues = Object.create(null);\n    var defs = definition && definition.variableDefinitions;\n    if (defs && defs.length) {\n        defs.forEach(function (def) {\n            if (def.defaultValue) {\n                valueToObjectRepresentation(defaultValues, def.variable.name, def.defaultValue);\n            }\n        });\n    }\n    return defaultValues;\n}\n//# sourceMappingURL=getFromAST.js.map"]},"metadata":{},"sourceType":"module"}