{"ast":null,"code":"var _jsxFileName = \"/home/ethan/avarts/frontend/src/components/Header.tsx\";\nimport { faBars } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React, { useEffect, useState } from 'react';\nimport { useLoginMutation } from '../generated/graphql';\nimport UserContext from '../userContext';\nimport { toggleSidebar } from '../utils/sideBar';\nimport AvatarDropdown from './AvatarDropdown';\nimport Upload from './Upload';\n\nconst halfmoon = require('halfmoon');\n\nconst Header = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [signinMutation] = useLoginMutation();\n  useEffect(() => {\n    halfmoon.onDOMContentLoaded();\n  }, []);\n\n  const login = async e => {\n    e.preventDefault();\n\n    try {\n      var _result$data$login;\n\n      const result = await signinMutation({\n        variables: {\n          email: email,\n          password: password\n        },\n        refetchQueries: ['currentUserQuery']\n      });\n\n      if (result && result.data && ((_result$data$login = result.data.login) === null || _result$data$login === void 0 ? void 0 : _result$data$login.token)) {\n        console.log(result);\n        localStorage.setItem('token', result.data.login.token);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(UserContext.Consumer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, ctx => /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, ctx.user.id && /*#__PURE__*/React.createElement(\"button\", {\n    id: \"toggleSidebarButton\",\n    className: \"btn\",\n    onClick: toggleSidebar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faBars,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\",\n    className: \"navbar-brand font-weight-bolder\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, \"Avarts\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar-content ml-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, ctx.user.id === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    \"data-toggle\": \"dropdown\",\n    type: \"button\",\n    id: \"sign-in-dropdown-toggle-btn\",\n    \"aria-haspopup\": \"true\",\n    \"aria-expanded\": \"false\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Sign in\", /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-angle-down ml-5\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown-menu w-250 w-sm-350 dropdown-menu-right\",\n    \"aria-labelledby\": \"sign-in-dropdown-toggle-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown-content p-20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => login(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    className: \"form-control\",\n    placeholder: \"Email\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    className: \"form-control\",\n    placeholder: \"Password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"btn btn-primary btn-block\",\n    type: \"submit\",\n    value: \"Sign in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 23\n    }\n  }))))) : /*#__PURE__*/React.createElement(React.Fragment, null, ctx.user.id && /*#__PURE__*/React.createElement(Upload, {\n    userId: ctx.user.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(AvatarDropdown, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  })))));\n};\n\nexport default Header;","map":{"version":3,"sources":["/home/ethan/avarts/frontend/src/components/Header.tsx"],"names":["faBars","FontAwesomeIcon","React","useEffect","useState","useLoginMutation","UserContext","toggleSidebar","AvatarDropdown","Upload","halfmoon","require","Header","email","setEmail","password","setPassword","signinMutation","onDOMContentLoaded","login","e","preventDefault","result","variables","refetchQueries","data","token","console","log","localStorage","setItem","error","ctx","user","id","target","value"],"mappings":"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","sourcesContent":["import { faBars } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport React, { useEffect, useState } from 'react'\nimport { useLoginMutation } from '../generated/graphql'\nimport UserContext from '../userContext'\nimport { toggleSidebar } from '../utils/sideBar'\nimport AvatarDropdown from './AvatarDropdown'\nimport Upload from './Upload'\n\nconst halfmoon = require('halfmoon')\n\nconst Header: React.FC = () => {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [signinMutation] = useLoginMutation()\n\n  useEffect(() => {\n    halfmoon.onDOMContentLoaded()\n  }, [])\n\n  const login = async (e: React.FormEvent) => {\n    e.preventDefault()\n    try {\n      const result = await signinMutation({\n        variables: {\n          email: email,\n          password: password,\n        },\n        refetchQueries: ['currentUserQuery'],\n      })\n      if (result && result.data && result.data.login?.token) {\n        console.log(result)\n        localStorage.setItem('token', result.data.login.token)\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  return (\n    <UserContext.Consumer>\n      {(ctx) => (\n        <nav className=\"navbar\">\n          <div className=\"navbar-content\">\n            {ctx.user.id && (\n              <button\n                id=\"toggleSidebarButton\"\n                className=\"btn\"\n                onClick={toggleSidebar}\n              >\n                <FontAwesomeIcon icon={faBars} />\n              </button>\n            )}\n            <a href=\"/\" className=\"navbar-brand font-weight-bolder\">\n              Avarts\n            </a>\n          </div>\n          <div className=\"navbar-content ml-auto\">\n            {ctx.user.id === 0 ? (\n              <div className=\"dropdown\">\n                <button\n                  className=\"btn btn-primary\"\n                  data-toggle=\"dropdown\"\n                  type=\"button\"\n                  id=\"sign-in-dropdown-toggle-btn\"\n                  aria-haspopup=\"true\"\n                  aria-expanded=\"false\"\n                >\n                  Sign in\n                  <i className=\"fa fa-angle-down ml-5\" aria-hidden=\"true\"></i>\n                </button>\n                <div\n                  className=\"dropdown-menu w-250 w-sm-350 dropdown-menu-right\"\n                  aria-labelledby=\"sign-in-dropdown-toggle-btn\"\n                >\n                  <div className=\"dropdown-content p-20\">\n                    <form onSubmit={(e) => login(e)}>\n                      <div className=\"form-group\">\n                        <label className=\"required\">Username</label>\n                        <input\n                          type=\"text\"\n                          name=\"email\"\n                          className=\"form-control\"\n                          placeholder=\"Email\"\n                          value={email}\n                          onChange={(e) => setEmail(e.target.value)}\n                        />\n                      </div>\n                      <div className=\"form-group\">\n                        <label className=\"required\">Password</label>\n                        <input\n                          type=\"password\"\n                          name=\"password\"\n                          className=\"form-control\"\n                          placeholder=\"Password\"\n                          value={password}\n                          onChange={(e) => setPassword(e.target.value)}\n                        />\n                      </div>\n                      <input\n                        className=\"btn btn-primary btn-block\"\n                        type=\"submit\"\n                        value=\"Sign in\"\n                      />\n                    </form>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <>\n                {ctx.user.id && <Upload userId={ctx.user.id} />}\n                <AvatarDropdown />\n              </>\n            )}\n          </div>\n        </nav>\n      )}\n    </UserContext.Consumer>\n  )\n}\n\nexport default Header\n"]},"metadata":{},"sourceType":"module"}