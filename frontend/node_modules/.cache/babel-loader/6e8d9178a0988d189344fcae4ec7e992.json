{"ast":null,"code":"/**!\n * urlencode - lib/urlencode.js\n *\n * MIT Licensed\n *\n * Authors:\n *   fengmk2 <fengmk2@gmail.com> (http://fengmk2.com)\n */\n\"use strict\";\n/**\n * Module dependencies.\n */\n\nvar iconv = require('iconv-lite');\n\nfunction isUTF8(charset) {\n  if (!charset) {\n    return true;\n  }\n\n  charset = charset.toLowerCase();\n  return charset === 'utf8' || charset === 'utf-8';\n}\n\nfunction encode(str, charset) {\n  if (isUTF8(charset)) {\n    return encodeURIComponent(str);\n  }\n\n  var buf = iconv.encode(str, charset);\n  var encodeStr = '';\n  var ch = '';\n\n  for (var i = 0; i < buf.length; i++) {\n    ch = buf[i].toString('16');\n\n    if (ch.length === 1) {\n      ch = '0' + ch;\n    }\n\n    encodeStr += '%' + ch;\n  }\n\n  encodeStr = encodeStr.toUpperCase();\n  return encodeStr;\n}\n\nfunction decode(str, charset) {\n  if (isUTF8(charset)) {\n    return decodeURIComponent(str);\n  }\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length;) {\n    if (str[i] === '%') {\n      i++;\n      bytes.push(parseInt(str.substring(i, i + 2), 16));\n      i += 2;\n    } else {\n      bytes.push(str.charCodeAt(i));\n      i++;\n    }\n  }\n\n  var buf = new Buffer(bytes);\n  return iconv.decode(buf, charset);\n}\n\nfunction parse(qs, sep, eq, options) {\n  if (typeof sep === 'object') {\n    // parse(qs, options)\n    options = sep;\n    sep = null;\n  }\n\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n  var maxKeys = 1000;\n  var charset = null;\n\n  if (options) {\n    if (typeof options.maxKeys === 'number') {\n      maxKeys = options.maxKeys;\n    }\n\n    if (typeof options.charset === 'string') {\n      charset = options.charset;\n    }\n  }\n\n  var len = qs.length; // maxKeys <= 0 means that we should not limit keys count\n\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20');\n    var idx = x.indexOf(eq);\n    var kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    if (kstr && kstr.indexOf('%') >= 0) {\n      try {\n        k = decode(kstr, charset);\n      } catch (e) {\n        k = kstr;\n      }\n    } else {\n      k = kstr;\n    }\n\n    if (vstr && vstr.indexOf('%') >= 0) {\n      try {\n        v = decode(vstr, charset);\n      } catch (e) {\n        v = vstr;\n      }\n    } else {\n      v = vstr;\n    }\n\n    if (!has(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n}\n\nfunction has(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nfunction isASCII(str) {\n  return /^[\\x00-\\x7F]*$/.test(str);\n}\n\nfunction encodeComponent(item, charset) {\n  item = String(item);\n\n  if (isASCII(item)) {\n    item = encodeURIComponent(item);\n  } else {\n    item = encode(item, charset);\n  }\n\n  return item;\n}\n\nvar stringify = function (obj, prefix, options) {\n  if (typeof prefix !== 'string') {\n    options = prefix || {};\n    prefix = null;\n  }\n\n  var charset = options.charset || 'utf-8';\n\n  if (Array.isArray(obj)) {\n    return stringifyArray(obj, prefix, options);\n  } else if ('[object Object]' === {}.toString.call(obj)) {\n    return stringifyObject(obj, prefix, options);\n  } else if ('string' === typeof obj) {\n    return stringifyString(obj, prefix, options);\n  } else {\n    return prefix + '=' + encodeComponent(String(obj), charset);\n  }\n};\n\nfunction stringifyString(str, prefix, options) {\n  if (!prefix) {\n    throw new TypeError('stringify expects an object');\n  }\n\n  var charset = options.charset;\n  return prefix + '=' + encodeComponent(str, charset);\n}\n\nfunction stringifyArray(arr, prefix, options) {\n  var ret = [];\n\n  if (!prefix) {\n    throw new TypeError('stringify expects an object');\n  }\n\n  for (var i = 0; i < arr.length; i++) {\n    ret.push(stringify(arr[i], prefix + '[' + i + ']', options));\n  }\n\n  return ret.join('&');\n}\n\nfunction stringifyObject(obj, prefix, options) {\n  var ret = [];\n  var keys = Object.keys(obj);\n  var key;\n  var charset = options.charset;\n\n  for (var i = 0, len = keys.length; i < len; ++i) {\n    key = keys[i];\n\n    if ('' === key) {\n      continue;\n    }\n\n    if (null === obj[key]) {\n      ret.push(encode(key, charset) + '=');\n    } else {\n      ret.push(stringify(obj[key], prefix ? prefix + '[' + encodeComponent(key, charset) + ']' : encodeComponent(key, charset), options));\n    }\n  }\n\n  return ret.join('&');\n}\n\nmodule.exports = encode;\nmodule.exports.encode = encode;\nmodule.exports.decode = decode;\nmodule.exports.parse = parse;\nmodule.exports.stringify = stringify;","map":{"version":3,"sources":["/home/ethan/avarts/frontend/node_modules/urlencode/lib/urlencode.js"],"names":["iconv","require","isUTF8","charset","toLowerCase","encode","str","encodeURIComponent","buf","encodeStr","ch","i","length","toString","toUpperCase","decode","decodeURIComponent","bytes","push","parseInt","substring","charCodeAt","Buffer","parse","qs","sep","eq","options","obj","regexp","split","maxKeys","len","x","replace","idx","indexOf","kstr","vstr","k","v","substr","e","has","Array","isArray","prop","Object","prototype","hasOwnProperty","call","isASCII","test","encodeComponent","item","String","stringify","prefix","stringifyArray","stringifyObject","stringifyString","TypeError","arr","ret","join","keys","key","module","exports"],"mappings":"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","sourcesContent":["/**!\n * urlencode - lib/urlencode.js\n *\n * MIT Licensed\n *\n * Authors:\n *   fengmk2 <fengmk2@gmail.com> (http://fengmk2.com)\n */\n\n\"use strict\";\n\n/**\n * Module dependencies.\n */\n\nvar iconv = require('iconv-lite');\n\nfunction isUTF8(charset) {\n  if (!charset) {\n    return true;\n  }\n  charset = charset.toLowerCase();\n  return charset === 'utf8' || charset === 'utf-8';\n}\n\nfunction encode(str, charset) {\n  if (isUTF8(charset)) {\n    return encodeURIComponent(str);\n  }\n\n  var buf = iconv.encode(str, charset);\n  var encodeStr = '';\n  var ch = '';\n  for (var i = 0; i < buf.length; i++) {\n    ch = buf[i].toString('16');\n    if (ch.length === 1) {\n      ch = '0' + ch;\n    }\n    encodeStr += '%' + ch;\n  }\n  encodeStr = encodeStr.toUpperCase();\n  return encodeStr;\n}\n\nfunction decode(str, charset) {\n  if (isUTF8(charset)) {\n    return decodeURIComponent(str);\n  }\n\n  var bytes = [];\n  for (var i = 0; i < str.length; ) {\n    if (str[i] === '%') {\n      i++;\n      bytes.push(parseInt(str.substring(i, i + 2), 16));\n      i += 2;\n    } else {\n      bytes.push(str.charCodeAt(i));\n      i++;\n    }\n  }\n  var buf = new Buffer(bytes);\n  return iconv.decode(buf, charset);\n}\n\nfunction parse(qs, sep, eq, options) {\n  if (typeof sep === 'object') {\n    // parse(qs, options)\n    options = sep;\n    sep = null;\n  }\n\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  var charset = null;\n  if (options) {\n    if (typeof options.maxKeys === 'number') {\n      maxKeys = options.maxKeys;\n    }\n    if (typeof options.charset === 'string') {\n      charset = options.charset;\n    }\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20');\n    var idx = x.indexOf(eq);\n    var kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    if (kstr && kstr.indexOf('%') >= 0) {\n      try {\n        k = decode(kstr, charset);\n      } catch (e) {\n        k = kstr;\n      }\n    } else {\n      k = kstr;\n    }\n\n    if (vstr && vstr.indexOf('%') >= 0) {\n      try {\n        v = decode(vstr, charset);\n      } catch (e) {\n        v = vstr;\n      }\n    } else {\n      v = vstr;\n    }\n\n    if (!has(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n}\n\nfunction has(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nfunction isASCII(str) {\n  return (/^[\\x00-\\x7F]*$/).test(str);\n}\n\nfunction encodeComponent(item, charset) {\n  item = String(item);\n  if (isASCII(item)) {\n    item = encodeURIComponent(item);\n  } else {\n    item = encode(item, charset);\n  }\n  return item;\n}\n\nvar stringify = function(obj, prefix, options) {\n  if (typeof prefix !== 'string') {\n    options = prefix || {};\n    prefix = null;\n  }\n  var charset = options.charset || 'utf-8';\n  if (Array.isArray(obj)) {\n    return stringifyArray(obj, prefix, options);\n  } else if ('[object Object]' === {}.toString.call(obj)) {\n    return stringifyObject(obj, prefix, options);\n  } else if ('string' === typeof obj) {\n    return stringifyString(obj, prefix, options);\n  } else {\n    return prefix + '=' + encodeComponent(String(obj), charset);\n  }\n};\n\nfunction stringifyString(str, prefix, options) {\n  if (!prefix) {\n    throw new TypeError('stringify expects an object');\n  }\n  var charset = options.charset;\n  return prefix + '=' + encodeComponent(str, charset);\n}\n\nfunction stringifyArray(arr, prefix, options) {\n  var ret = [];\n  if (!prefix) {\n    throw new TypeError('stringify expects an object');\n  }\n  for (var i = 0; i < arr.length; i++) {\n    ret.push(stringify(arr[i], prefix + '[' + i + ']', options));\n  }\n  return ret.join('&');\n}\n\nfunction stringifyObject(obj, prefix, options) {\n  var ret = [];\n  var keys = Object.keys(obj);\n  var key;\n\n  var charset = options.charset;\n  for (var i = 0, len = keys.length; i < len; ++i) {\n    key = keys[i];\n    if ('' === key) {\n      continue;\n    }\n    if (null === obj[key]) {\n      ret.push(encode(key, charset) + '=');\n    } else {\n      ret.push(stringify(\n        obj[key],\n        prefix ? prefix + '[' + encodeComponent(key, charset) + ']': encodeComponent(key, charset),\n        options));\n    }\n  }\n\n  return ret.join('&');\n}\n\nmodule.exports = encode;\nmodule.exports.encode = encode;\nmodule.exports.decode = decode;\nmodule.exports.parse = parse;\nmodule.exports.stringify = stringify;\n"]},"metadata":{},"sourceType":"script"}