{"ast":null,"code":"import { equal } from '@wry/equality';\nimport { invariant } from 'ts-invariant';\nimport { parser, operationName } from \"../parser/index.js\";\n\nvar OperationData = function () {\n  function OperationData(options, context) {\n    this.isMounted = false;\n    this.previousOptions = {};\n    this.context = {};\n    this.options = {};\n    this.options = options || {};\n    this.context = context || {};\n  }\n\n  OperationData.prototype.getOptions = function () {\n    return this.options;\n  };\n\n  OperationData.prototype.setOptions = function (newOptions, storePrevious) {\n    if (storePrevious === void 0) {\n      storePrevious = false;\n    }\n\n    if (storePrevious && !equal(this.options, newOptions)) {\n      this.previousOptions = this.options;\n    }\n\n    this.options = newOptions;\n  };\n\n  OperationData.prototype.unmount = function () {\n    this.isMounted = false;\n  };\n\n  OperationData.prototype.refreshClient = function () {\n    var client = this.options && this.options.client || this.context && this.context.client;\n    process.env.NODE_ENV === \"production\" ? invariant(!!client, 28) : invariant(!!client, 'Could not find \"client\" in the context or passed in as an option. ' + 'Wrap the root component in an <ApolloProvider>, or pass an ' + 'ApolloClient instance in via options.');\n    var isNew = false;\n\n    if (client !== this.client) {\n      isNew = true;\n      this.client = client;\n      this.cleanup();\n    }\n\n    return {\n      client: this.client,\n      isNew: isNew\n    };\n  };\n\n  OperationData.prototype.verifyDocumentType = function (document, type) {\n    var operation = parser(document);\n    var requiredOperationName = operationName(type);\n    var usedOperationName = operationName(operation.type);\n    process.env.NODE_ENV === \"production\" ? invariant(operation.type === type, 29) : invariant(operation.type === type, \"Running a \" + requiredOperationName + \" requires a graphql \" + (requiredOperationName + \", but a \" + usedOperationName + \" was used instead.\"));\n  };\n\n  return OperationData;\n}();\n\nexport { OperationData };","map":{"version":3,"sources":["../../../src/react/data/OperationData.ts"],"names":[],"mappings":"AACA,SAAS,KAAT,QAAsB,eAAtB;AACA,SAAS,SAAT,QAA0B,cAA1B;AAGA,SAAuB,MAAvB,EAA+B,aAA/B,QAAoD,oBAApD;;AAGA,IAAA,aAAA,GAAA,YAAA;AAUE,WAAA,aAAA,CAAY,OAAZ,EAA+C,OAA/C,EAA4D;AATrD,SAAA,SAAA,GAAqB,KAArB;AACA,SAAA,eAAA,GAA2C,EAA3C;AAGA,SAAA,OAAA,GAAe,EAAf;AAGC,SAAA,OAAA,GAAmC,EAAnC;AAGN,SAAK,OAAL,GAAe,OAAO,IAAK,EAA3B;AACA,SAAK,OAAL,GAAe,OAAO,IAAI,EAA1B;AACD;;AAEM,EAAA,aAAA,CAAA,SAAA,CAAA,UAAA,GAAP,YAAA;AACE,WAAO,KAAK,OAAZ;AACD,GAFM;;AAIA,EAAA,aAAA,CAAA,SAAA,CAAA,UAAA,GAAP,UACE,UADF,EAEE,aAFF,EAEgC;AAA9B,QAAA,aAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,aAAA,GAAA,KAAA;AAA8B;;AAE9B,QAAI,aAAa,IAAI,CAAC,KAAK,CAAC,KAAK,OAAN,EAAe,UAAf,CAA3B,EAAuD;AACrD,WAAK,eAAL,GAAuB,KAAK,OAA5B;AACD;;AACD,SAAK,OAAL,GAAe,UAAf;AACD,GARM;;AAcG,EAAA,aAAA,CAAA,SAAA,CAAA,OAAA,GAAV,YAAA;AACE,SAAK,SAAL,GAAiB,KAAjB;AACD,GAFS;;AAIA,EAAA,aAAA,CAAA,SAAA,CAAA,aAAA,GAAV,YAAA;AACE,QAAM,MAAM,GACT,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,MAA9B,IACC,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,MAFhC;AAIA,IAAA,OAAA,CAAA,GAAA,CACI,QADJ,KAEE,YAFF,GAEE,SAAA,CAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAFF,GAEE,SAAA,CAAA,CAAA,CAAA,MAAA,EAAA,uEACE,6DADF,GAEE,uCAFF,CAFF;AAOA,QAAI,KAAK,GAAG,KAAZ;;AACA,QAAI,MAAM,KAAK,KAAK,MAApB,EAA4B;AAC1B,MAAA,KAAK,GAAG,IAAR;AACA,WAAK,MAAL,GAAc,MAAd;AACA,WAAK,OAAL;AACD;;AACD,WAAO;AACL,MAAA,MAAM,EAAE,KAAK,MADR;AAEL,MAAA,KAAK,EAAA;AAFA,KAAP;AAID,GAtBS;;AAwBA,EAAA,aAAA,CAAA,SAAA,CAAA,kBAAA,GAAV,UAA6B,QAA7B,EAAqD,IAArD,EAAuE;AACrE,QAAM,SAAS,GAAG,MAAM,CAAC,QAAD,CAAxB;AACA,QAAM,qBAAqB,GAAG,aAAa,CAAC,IAAD,CAA3C;AACA,QAAM,iBAAiB,GAAG,aAAa,CAAC,SAAS,CAAC,IAAX,CAAvC;AACA,IAAA,OAAA,CAAA,GAAA,CACE,QADF,KACgB,YADhB,GAEE,SAAA,CAAa,SAAA,CAAA,IAAA,KAAA,IAAb,EAAkC,EAAlC,CAFF,GAEoC,SAAA,CAAA,SAAsB,CAAA,IAAtB,KAAsB,IAAtB,EAAsB,eAAA,qBAAA,GAAA,sBAAA,IACnD,qBAAqB,GAAA,UAArB,GAAgC,iBAAhC,GAAiD,oBADE,CAAtB,CAFpC;AAKD,GATS;;AAUZ,SAAA,aAAA;AAAC,CAvED,EAAA","sourceRoot":"","sourcesContent":["import { equal } from '@wry/equality';\nimport { invariant } from 'ts-invariant';\nimport { parser, operationName } from \"../parser/index.js\";\nvar OperationData = (function () {\n    function OperationData(options, context) {\n        this.isMounted = false;\n        this.previousOptions = {};\n        this.context = {};\n        this.options = {};\n        this.options = options || {};\n        this.context = context || {};\n    }\n    OperationData.prototype.getOptions = function () {\n        return this.options;\n    };\n    OperationData.prototype.setOptions = function (newOptions, storePrevious) {\n        if (storePrevious === void 0) { storePrevious = false; }\n        if (storePrevious && !equal(this.options, newOptions)) {\n            this.previousOptions = this.options;\n        }\n        this.options = newOptions;\n    };\n    OperationData.prototype.unmount = function () {\n        this.isMounted = false;\n    };\n    OperationData.prototype.refreshClient = function () {\n        var client = (this.options && this.options.client) ||\n            (this.context && this.context.client);\n        process.env.NODE_ENV === \"production\" ? invariant(!!client, 28) : invariant(!!client, 'Could not find \"client\" in the context or passed in as an option. ' +\n            'Wrap the root component in an <ApolloProvider>, or pass an ' +\n            'ApolloClient instance in via options.');\n        var isNew = false;\n        if (client !== this.client) {\n            isNew = true;\n            this.client = client;\n            this.cleanup();\n        }\n        return {\n            client: this.client,\n            isNew: isNew\n        };\n    };\n    OperationData.prototype.verifyDocumentType = function (document, type) {\n        var operation = parser(document);\n        var requiredOperationName = operationName(type);\n        var usedOperationName = operationName(operation.type);\n        process.env.NODE_ENV === \"production\" ? invariant(operation.type === type, 29) : invariant(operation.type === type, \"Running a \" + requiredOperationName + \" requires a graphql \" +\n            (requiredOperationName + \", but a \" + usedOperationName + \" was used instead.\"));\n    };\n    return OperationData;\n}());\nexport { OperationData };\n//# sourceMappingURL=OperationData.js.map"]},"metadata":{},"sourceType":"module"}