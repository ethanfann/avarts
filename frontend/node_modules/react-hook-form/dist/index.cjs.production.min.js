"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=e=>e instanceof HTMLElement;const t="blur",n="change",c="input",u="onBlur",s="onChange",i="onSubmit",a="onTouched",o="all",l="max",f="min",d="maxLength",g="minLength",h="pattern",b="required",m="validate";var v=e=>null==e,y=e=>Array.isArray(e);const p=e=>"object"==typeof e;var O=e=>!v(e)&&!y(e)&&p(e)&&!(e instanceof Date),R=e=>!y(e)&&(/^\w*$/.test(e)||!/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/.test(e)),j=e=>{const r=[];return e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,(e,t,n,c)=>{r.push(n?c.replace(/\\(\\)?/g,"$1"):t||e)}),r};function x(e,r,t){let n=-1;const c=R(r)?[r]:j(r),u=c.length,s=u-1;for(;++n<u;){const r=c[n];let u=t;if(n!==s){const t=e[r];u=O(t)||y(t)?t:isNaN(+c[n+1])?{}:[]}e[r]=u,e=e[r]}return e}var k=e=>Object.entries(e).reduce((e,[r,t])=>R(r)?Object.assign(Object.assign({},e),{[r]:t}):(x(e,r,t),e),{}),V=e=>void 0===e,w=e=>e.filter(Boolean),C=(e,r,t)=>{const n=w(r.split(/[,[\].]+?/)).reduce((e,r)=>v(e)?e:e[r],e);return V(n)||n===e?V(e[r])?t:e[r]:n},E=(e,u)=>{r(e)&&e.removeEventListener&&(e.removeEventListener(c,u),e.removeEventListener(n,u),e.removeEventListener(t,u))};const F={isValid:!1,value:""};var S=e=>y(e)?e.reduce((e,r)=>r&&r.ref.checked?{isValid:!0,value:r.ref.value}:e,F):F,D=e=>"radio"===e.type,A=e=>"file"===e.type,B=e=>"checkbox"===e.type,W=e=>"select-multiple"===e.type;const L={value:!1,isValid:!1},N={value:!0,isValid:!0};var $=e=>{if(y(e)){if(e.length>1){const r=e.filter(e=>e&&e.ref.checked).map(({ref:{value:e}})=>e);return{value:r,isValid:!!r.length}}const{checked:r,value:t,attributes:n}=e[0].ref;return r?n&&!V(n.value)?V(t)||""===t?N:{value:t,isValid:!0}:N:L}return L};function T(e,r,t){const n=e.current[r];if(n){const{ref:{value:e},ref:r}=n;return A(r)?r.files:D(r)?S(n.options).value:W(r)?(c=r.options,[...c].filter(({selected:e})=>e).map(({value:e})=>e)):B(r)?$(n.options).value:e}var c;if(t)return t.current[r]}function M(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&M(e.parentNode)}var P=e=>O(e)&&!Object.keys(e).length,H=e=>"boolean"==typeof e;function I(e,r){const t=R(r)?[r]:j(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=V(e)?n++:e[r[n++]];return e}(e,t),c=t[t.length-1];let u=void 0;n&&delete n[c];for(let r=0;r<t.slice(0,-1).length;r++){let n=-1,c=void 0;const s=t.slice(0,-(r+1)),i=s.length-1;for(r>0&&(u=e);++n<s.length;){const r=s[n];c=c?c[r]:e[r],i===n&&(O(c)&&P(c)||y(c)&&!c.filter(e=>O(e)&&!P(e)||H(e)).length)&&(u?delete u[r]:delete e[r]),u=c}}return e}const q=(e,r)=>e&&e.ref===r;var z=e=>"string"==typeof e;var _=(e,r,t)=>{const n={};for(const r in e.current)(V(t)||(z(t)?r.startsWith(t):y(t)&&t.find(e=>r.startsWith(e))))&&(n[r]=T(e,r));return function e(r,t){if(!O(r)||!O(t))return t;for(const n in t){const c=r[n],u=t[n];O(c)&&O(u)?r[n]=e(c,u):r[n]=u}return r}(k((r||{}).current||{}),k(n))},U=(e,{type:r,types:t={},message:n})=>O(e)&&e.type===r&&e.message===n&&Object.keys(e.types||{}).length===Object.keys(t).length&&Object.entries(e.types||{}).every(([e,r])=>t[e]===r);var G=e=>e instanceof RegExp;var J=e=>{return O(r=e)&&!G(r)?e:{value:e,message:""};var r},K=e=>"function"==typeof e,Q=r=>z(r)||O(r)&&e.isValidElement(r);function X(e,r,t="validate"){if(Q(e)||H(e)&&!e)return{type:t,message:Q(e)?e:"",ref:r}}var Y=(e,r,t,n,c)=>{if(r){const r=t[e];return Object.assign(Object.assign({},r),{types:Object.assign(Object.assign({},r&&r.types?r.types:{}),{[n]:c||!0})})}return{}},Z=async(e,r,{ref:t,ref:{type:n,value:c},options:u,required:s,maxLength:i,minLength:a,min:o,max:y,pattern:p,validate:R},j)=>{const x=e.current,k=t.name,V={},w=D(t),C=B(t),E=w||C,F=""===c,A=Y.bind(null,k,r,V),W=(e,r,n,c=d,u=g)=>{const s=e?r:n;V[k]=Object.assign({type:e?c:u,message:s,ref:t},A(e?c:u,s))};if(s&&(!w&&!C&&(F||v(c))||H(c)&&!c||C&&!$(u).isValid||w&&!S(u).isValid)){const{value:e,message:n}=Q(s)?{value:!!s,message:s}:J(s);if(e&&(V[k]=Object.assign({type:b,message:n,ref:E?(x[k].options||[])[0].ref:t},A(b,n)),!r))return V}if(!v(o)||!v(y)){let e,u;const{value:s,message:i}=J(y),{value:a,message:d}=J(o);if("number"===n||!n&&!isNaN(c)){const r=t.valueAsNumber||parseFloat(c);v(s)||(e=r>s),v(a)||(u=r<a)}else{const r=t.valueAsDate||new Date(c);z(s)&&(e=r>new Date(s)),z(a)&&(u=r<new Date(a))}if((e||u)&&(W(!!e,i,d,l,f),!r))return V}if(z(c)&&!F&&(i||a)){const{value:e,message:t}=J(i),{value:n,message:u}=J(a),s=c.toString().length,o=!v(e)&&s>e,l=!v(n)&&s<n;if((o||l)&&(W(!!o,t,u),!r))return V}if(p&&!F){const{value:e,message:n}=J(p);if(G(e)&&!e.test(c)&&(V[k]=Object.assign({type:h,message:n,ref:t},A(h,n)),!r))return V}if(R){const n=T(e,k,j),c=E&&u?u[0].ref:t;if(K(R)){const e=X(await R(n),c);if(e&&(V[k]=Object.assign(Object.assign({},e),A(m,e.message)),!r))return V}else if(O(R)){let e={};for(const[t,u]of Object.entries(R)){if(!P(e)&&!r)break;const s=X(await u(n),c,t);s&&(e=Object.assign(Object.assign({},s),A(t,s.message)),r&&(V[k]=e))}if(!P(e)&&(V[k]=Object.assign({ref:c},e),!r))return V}}return V},ee=e=>v(e)||!p(e);const re=(e,r)=>Object.entries(r).map(([t,n])=>((r,t,n)=>{const c=n?`${e}.${t}`:`${e}[${t}]`;return ee(r)?c:re(c,r)})(n,t,O(r))).flat(1/0);var te=(e,r,t,n,c)=>{let u;return t.add(r),P(e)?u=void 0:(u=C(e,r),(O(u)||y(u))&&re(r,u).forEach(e=>t.add(e))),V(u)?c?n:C(n,r):u},ne=({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:c,isReValidateOnChange:u,isBlurEvent:s,isSubmitted:i,isOnAll:a})=>!a&&(!i&&t?!(n||s):(i?c:e)?!s:!(i?u:r)||s),ce=e=>e.substring(0,e.indexOf("["));function ue(e=[],r=[]){const t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(const n of t){const t=e[n],c=r[n];if((O(t)||y(t))&&(O(c)||y(c))?!ue(t,c):t!==c)return!1}return!0}const se=(e,r)=>RegExp(`^${r}[\\d+]`.replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e);var ie=(e,r)=>[...e].some(e=>se(r,e));var ae=e=>({isOnSubmit:!e||e===i,isOnBlur:e===u,isOnChange:e===s,isOnAll:e===o,isOnTouch:e===a}),oe=e=>D(e)||B(e);const le="undefined"==typeof window,fe="undefined"!=typeof document&&!le&&!V(window.HTMLElement),de=fe?"Proxy"in window:"undefined"!=typeof Proxy;function ge(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)r.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(t[n[c]]=e[n[c]])}return t}const he=e.createContext(null);he.displayName="RHFContext";const be=()=>e.useContext(he);var me=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)}))};var ve=(e,r)=>V(r)?[]:y(r)?function(e,r){let t=-1;for(;++t<e.length;)r.indexOf(t)>=0&&delete e[t];return w(e)}(e,r):((e,r)=>[...e.slice(0,r),...e.slice(r+1)])(e,r),ye=(e,r,t)=>y(e)?(V(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[],pe=(e,r,t)=>{const n=[e[t],e[r]];e[r]=n[0],e[t]=n[1]};function Oe(e,r){return[...y(r)?r:[r||void 0],...e]}function Re(e,r,t){return[...e.slice(0,r),...y(t)?t:[t||void 0],...e.slice(r)]}var je=e=>y(e)?Array(e.length).fill(void 0):void 0;function xe(e){if(O(e)){const r={};for(const t in e)r[t]=!0;return[r]}return[!0]}const ke=e=>y(e)?e.map(xe).flat():xe(e),Ve=(e,r)=>Object.assign({[r]:me()},O(e)?e:{value:e}),we=(e,r)=>(y(e)?e:[]).map(e=>Ve(e,r));exports.Controller=r=>{var{name:t,rules:n,as:c,render:u,defaultValue:s,control:i,onFocus:a}=r,o=ge(r,["name","rules","as","render","defaultValue","control","onFocus"]);const l=be(),{defaultValuesRef:f,setValue:d,register:g,unregister:h,trigger:b,mode:m,reValidateMode:{isReValidateOnBlur:v,isReValidateOnChange:y},isSubmittedRef:p,touchedFieldsRef:R,readFormStateRef:j,reRender:k,fieldsRef:w,fieldArrayNamesRef:E,unmountFieldsStateRef:F}=i||l.control,S=!ie(E.current,t),D=()=>!V(C(F.current,t))&&S?F.current[t]:V(s)?C(f.current,t):s,[A,B]=e.useState(D()),W=e.useRef(A),L=e.useRef(a),N=e=>!ne(Object.assign({isBlurEvent:e,isReValidateOnBlur:v,isReValidateOnChange:y,isSubmitted:p.current},m)),$=([e])=>{const r=(e=>ee(e)||!O(e.target)||O(e.target)&&!e.type?e:V(e.target.value)?e.target.checked:e.target.value)(e);return B(r),W.current=r,r},T=e.useCallback(()=>{w.current[t]?w.current[t]=Object.assign({ref:w.current[t].ref},n):(g(Object.defineProperty({name:t,focus:L.current},"value",{set(e){B(e),W.current=e},get:()=>W.current}),n),S&&!C(f.current,t)&&B(D()))},[w,n,t,L,g]);e.useEffect(()=>()=>{!ie(E.current,t)&&h(t)},[h,t,E]),e.useEffect(()=>{T()},[T]),e.useEffect(()=>{w.current[t]||(T(),S&&B(D()))});const M=()=>{j.current.touched&&!C(R.current,t)&&(x(R.current,t,!0),k()),N(!0)&&b(t)},P=(...e)=>d(t,$(e),{shouldValidate:N(),shouldDirty:!0}),H=Object.assign(Object.assign({},o),{onChange:P,onBlur:M,name:t,value:A});return c?e.isValidElement(c)?e.cloneElement(c,H):e.createElement(c,H):u?u({onChange:P,onBlur:M,value:A,name:t}):null},exports.FormProvider=r=>{var{children:t}=r,n=ge(r,["children"]);return e.createElement(he.Provider,{value:Object.assign({},n)},t)},exports.appendErrors=Y,exports.get=C,exports.transformToNestObject=k,exports.useFieldArray=({control:r,name:t,keyName:n="id"})=>{const c=be(),u=e.useRef(-1),{isWatchAllRef:s,resetFieldArrayFunctionRef:i,fieldArrayNamesRef:a,reRender:o,fieldsRef:l,defaultValuesRef:f,removeFieldEventListener:d,errorsRef:g,dirtyFieldsRef:h,isDirtyRef:b,touchedFieldsRef:m,readFormStateRef:v,watchFieldsRef:p,validFieldsRef:O,fieldsWithValidationRef:R,fieldArrayDefaultValues:j,validateResolver:k,renderWatchedInputs:E,getValues:F}=r||c.control;let S;const D=()=>[...C(j.current,t)||C(f.current,t)||[]],A=e.useRef(D()),[B,W]=e.useState(we(A.current,n)),L=e.useRef(B),N=ce(t),$=()=>C(F()||{},t,L.current).map((e,r)=>Object.assign(Object.assign({},L.current[r]),e));L.current=B,a.current.add(t),!C(j.current,t)&&N&&x(j.current,N,C(f.current,N));const T=e=>e.map(e=>Ve(e,n)),M=e=>{if(W(e),v.current.isValid&&k){const r={};x(r,t,e),k(r)}},P=e=>{E(t),(v.current.dirtyFields||v.current.isDirty||v.current.isValid)&&!s.current&&(e=!0),e&&o()},H=e=>{(v.current.isDirty||v.current.dirtyFields)&&(b.current=V(e)||!ue(e.map((e={})=>{var r=n;e[r];return ge(e,["symbol"==typeof r?r:r+""])}),C(f.current,t,[])));for(const e in l.current)se(e,t)&&l.current[e]&&d(l.current[e],!0)},q=()=>{H(),A.current=D(),W(we(A.current,n))};return e.useEffect(()=>{const e=C(j.current,t);if(e&&B.length<e.length&&(e.pop(),x(j.current,t,e)),s.current)o();else if(p){let e=!0;for(const r of p.current)if(r.startsWith(t)){o(),e=!1;break}e&&E(t)}if(u.current>-1)for(const e in l.current){const r=l.current[e];if(e.startsWith(`${t}[${u.current}]`)&&r.ref.focus){r.ref.focus();break}}u.current=-1},[B,t,j,o,l,p,s]),e.useEffect(()=>{const e=i.current;return e[t]=q,()=>{H(),delete e[t],a.current.delete(t)}},[]),{swap:e.useCallback((e,r)=>{S=!1;const n=$();pe(n,e,r),H(n),M([...n]),y(C(g.current,t))&&pe(C(g.current,t),e,r),v.current.touched&&C(m.current,t)&&(pe(C(m.current,t),e,r),S=!0),(v.current.dirtyFields||v.current.isDirty)&&C(h.current,t)&&(pe(C(h.current,t),e,r),S=!0),P(S)},[t]),move:e.useCallback((e,r)=>{S=!1;const n=$();ye(n,e,r),H(n),M([...n]),y(C(g.current,t))&&ye(C(g.current,t),e,r),v.current.touched&&C(m.current,t)&&(ye(C(m.current,t),e,r),S=!0),(v.current.dirtyFields||v.current.isDirty)&&C(h.current,t)&&(ye(C(h.current,t),e,r),S=!0),P(S)},[t]),prepend:e.useCallback((e,r=!0)=>{const c=je(e);S=!1,M(Oe($(),y(e)?T(e):[Ve(e,n)])),H(),y(C(g.current,t))&&x(g.current,t,Oe(C(g.current,t),c)),v.current.touched&&C(m.current,t)&&(x(m.current,t,Oe(C(m.current,t),c)),S=!0),(v.current.dirtyFields||v.current.isDirty)&&(x(h.current,t,Oe(C(h.current,t)||[],ke(e))),S=!0),P(S),u.current=r?0:-1},[t]),append:e.useCallback((e,r=!0)=>{S=!1,M([...L.current,...y(e)?T(e):[Ve(e,n)]]),(v.current.dirtyFields||v.current.isDirty)&&(x(h.current,t,[...C(h.current,t)||je(B.slice(0,1)),...ke(e)]),b.current=!0,S=!0),u.current=r?L.current.length:-1,P(S)},[t]),remove:e.useCallback(e=>{S=!1;const r=$();if(M(ve(r,e)),H(ve(r,e)),y(C(g.current,t))&&(x(g.current,t,ve(C(g.current,t),e)),w(C(g.current,t,[])).length||I(g.current,t)),v.current.touched&&C(m.current,t)&&(x(m.current,t,ve(C(m.current,t),e)),S=!0),(v.current.dirtyFields||v.current.isDirty)&&C(h.current,t)&&(x(h.current,t,ve(C(h.current,t),e)),w(C(h.current,t,[])).length||I(h.current,t),S=!0),v.current.isValid&&!k){let r=-1,n=!1;const c=V(e);for(;r++<B.length;){const u=r===B.length-1,s=(y(e)?e:[e]).indexOf(r)>=0;if((s||c)&&(n=!0),n)for(const e in B[r]){const n=(n=0)=>`${t}[${r-n}].${e}`;s||u||c?(O.current.delete(n()),R.current.delete(n())):(O.current.has(n())&&O.current.add(n(1)),R.current.has(n())&&R.current.add(n(1)))}}}P(S)},[B,t]),insert:e.useCallback((e,r,c=!0)=>{S=!1;const s=je(r),i=$();M(Re(i,e,y(r)?T(r):[Ve(r,n)])),H(Re(i,e)),y(C(g.current,t))&&x(g.current,t,Re(C(g.current,t),e,s)),v.current.touched&&C(m.current,t)&&(x(m.current,t,Re(C(m.current,t),e,s)),S=!0),(v.current.dirtyFields||v.current.isDirty)&&C(h.current,t)&&(x(h.current,t,Re(C(h.current,t),e,ke(r))),S=!0),P(S),u.current=c?e:-1},[t]),fields:B}},exports.useForm=function({mode:u=i,reValidateMode:a=s,resolver:l,context:f,defaultValues:d={},shouldFocusError:g=!0,shouldUnregister:h=!0,criteriaMode:b}={}){const m=e.useRef({}),p=e.useRef({}),R=e.useRef({}),j=e.useRef({}),F=e.useRef({}),S=e.useRef(new Set),L=e.useRef({}),N=e.useRef({}),$=e.useRef(new Set),H=e.useRef(new Set),G=e.useRef(!0),J=e.useRef(d),Q=e.useRef({}),X=e.useRef(!1),Y=e.useRef(!1),se=e.useRef(!1),ge=e.useRef(!1),he=e.useRef(0),be=e.useRef(!1),me=e.useRef(),ve=e.useRef({}),ye=e.useRef({}),pe=e.useRef(f),Oe=e.useRef(l),Re=e.useRef(new Set),[,je]=e.useState(),xe=e.useRef(ae(u)),{current:{isOnSubmit:ke,isOnTouch:Ve}}=xe,we=b===o,Ce=e.useRef({isDirty:!de,dirtyFields:!de,isSubmitted:ke,submitCount:!de,touched:!de||Ve,isSubmitting:!de,isValid:!de}),{current:{isOnBlur:Ee,isOnChange:Fe}}=e.useRef(ae(a));pe.current=f,Oe.current=l;const Se=e.useCallback(()=>!X.current&&je({}),[]),De=e.useCallback((e,r,t=!1)=>{let n=t||function({errors:e,name:r,error:t,validFields:n,fieldsWithValidation:c}){const u=P(t),s=P(e),i=C(t,r),a=C(e,r);return(!u||!n.has(r))&&(!!(s!==u||!s&&!a||u&&c.has(r)&&!n.has(r))||i&&!U(a,i))}({errors:p.current,error:r,name:e,validFields:H.current,fieldsWithValidation:$.current});const c=C(p.current,e);if(P(r)?(($.current.has(e)||Oe.current)&&(H.current.add(e),n=n||c),p.current=I(p.current,e)):(H.current.delete(e),n=n||!c||!U(c,r[e]),x(p.current,e,r[e])),n&&!v(t))return Se(),!0},[]),Ae=e.useCallback(({ref:e,options:t},n)=>{const c=fe&&r(e)&&v(n)?"":n;D(e)&&t?t.forEach(({ref:e})=>e.checked=e.value===c):A(e)&&!z(c)?e.files=c:W(e)?[...e.options].forEach(e=>e.selected=c.includes(e.value)):B(e)&&t?t.length>1?t.forEach(({ref:e})=>e.checked=String(c).includes(e.value)):t[0].ref.checked=!!c:e.value=c},[]),Be=e.useCallback(e=>{const{isDirty:r,dirtyFields:t}=Ce.current;if(!m.current[e]||!r&&!t)return!1;const n=Q.current[e]!==T(m,e,ve),c=C(F.current,e),u=ie(Re.current,e),s=ge.current;return n?x(F.current,e,!0):I(F.current,e),ge.current=u&&!ue(C(He(),ce(e)),C(J.current,ce(e)))||!P(F.current),r&&s!==ge.current||t&&c!==C(F.current,e)},[]),We=e.useCallback(async(e,r)=>{if(m.current[e]){const t=await Z(m,we,m.current[e],ve);return De(e,t,!!r&&null),P(t)}return!1},[De,we]),Le=e.useCallback(async e=>{const{errors:r}=await Oe.current(He(),pe.current,we),t=G.current;if(G.current=P(r),y(e)){const t=e.map(e=>{const t=C(r,e);return t?x(p.current,e,t):I(p.current,e),!t}).every(Boolean);return Se(),t}{const n=C(r,e);return De(e,n?{[e]:n}:{},t!==G.current),!n}},[De,we]),Ne=e.useCallback(async e=>{const r=e||Object.keys(m.current);if(Oe.current)return Le(r);if(y(r)){const e=await Promise.all(r.map(async e=>await We(e,!0)));return Se(),e.every(Boolean)}return await We(r)},[Le,We]),$e=e.useCallback((e,r,{shouldDirty:t,shouldValidate:n})=>{re(e,r).forEach(c=>{const u={},s=m.current[c];s&&(x(u,e,r),Ae(s,C(u,c)),t&&Be(c),n&&Ne(c))})},[Ne,Ae,Be]),Te=e.useCallback((e,r,t)=>m.current[e]?(Ae(m.current[e],r),t.shouldDirty&&Be(e)):(ee(r)||$e(e,r,t),h||(ve.current[e]=r),!0),[Be,Ae,$e]),Me=e=>Y.current||S.current.has(e)||S.current.has((e.match(/\w+/)||[])[0]),Pe=(e,r=!0)=>{if(!P(L.current))for(const t in L.current)e&&!L.current[t].has(e)&&!L.current[t].has(ce(e))&&L.current[t].size||(N.current[t](),r=!1);return r};function He(e){return z(e)?T(m,e,ve):y(e)?e.reduce((e,r)=>Object.assign(Object.assign({},e),{[r]:T(m,r,ve)}),{}):_(m,ve)}me.current=me.current?me.current:async({type:e,target:r})=>{const n=r.name,c=m.current[n];let u;if(c){const r=e===t,s=ne(Object.assign({isBlurEvent:r,isReValidateOnChange:Fe,isReValidateOnBlur:Ee,isSubmitted:se.current,isTouched:!!C(R.current,n)},xe.current));let i=Be(n)||Me(n);if(r&&!C(R.current,n)&&Ce.current.touched&&(x(R.current,n,!0),i=!0),s)return Pe(n),i&&Se();if(Oe.current){const{errors:e}=await Oe.current(He(),pe.current,we),r=G.current;G.current=P(e),u=C(e,n)?{[n]:C(e,n)}:{},r!==G.current&&(i=!0)}else u=await Z(m,we,c,ve);Pe(n),!De(n,u)&&i&&Se()}};const Ie=e.useCallback(async(e={})=>{const{errors:r}=await Oe.current(Object.assign(Object.assign(Object.assign({},J.current),He()),e),pe.current,we),t=G.current;G.current=P(r),t!==G.current&&Se()},[we]),qe=e.useCallback((e,r)=>function(e,r,t,n,c,u){const{ref:s,ref:{name:i,type:a},mutationWatcher:o}=t,l=e.current[i];if(!c){const r=T(e,i,n);V(r)||(n.current[i]=r)}if(a)if((D(s)||B(s))&&l){const{options:t}=l;y(t)&&t.length?(w(t).forEach((e,n)=>{const{ref:c,mutationWatcher:s}=e;(c&&M(c)&&q(e,c)||u)&&(E(c,r),s&&s.disconnect(),I(t,`[${n}]`))}),t&&!w(t).length&&delete e.current[i]):delete e.current[i]}else(M(s)&&q(l,s)||u)&&(E(s,r),o&&o.disconnect(),delete e.current[i]);else delete e.current[i]}(m,me.current,e,ve,h,r),[h]),ze=e.useCallback((e,r)=>{!e||ie(Re.current,e.ref.name)&&!r||(qe(e,r),h&&([p,R,F,Q].forEach(r=>I(r.current,e.ref.name)),[$,H].forEach(r=>r.current.delete(e.ref.name)),(Ce.current.isValid||Ce.current.touched||Ce.current.isDirty)&&(ge.current=!P(F.current),Se(),Oe.current&&Ie())))},[Ie,qe]),_e=e.useCallback((e,r,t)=>{const n=t?L.current[t]:S.current,c=V(r)?J.current:r,u=_(m,ve,e);return z(e)?te(u,e,n,V(r)?C(c,e):r,!0):y(e)?e.reduce((e,r)=>Object.assign(Object.assign({},e),{[r]:te(u,r,n,c)}),{}):(V(t)&&(Y.current=!0),k(!P(u)&&u||c))},[]);function Ue(e,u={}){const{name:s,type:i,value:a}=e,o=Object.assign({ref:e},u),f=m.current,d=oe(e),g=t=>fe&&(!r(e)||t===e);let h,b,v=f[s],p=!0;if(v&&(d?y(v.options)&&w(v.options).find(e=>a===e.ref.value&&g(e.ref)):g(v.ref)))return void(f[s]=Object.assign(Object.assign({},v),u));if(i){const r=function(e,r){const t=new MutationObserver(()=>{M(e)&&(t.disconnect(),r())});return t.observe(window.document,{childList:!0,subtree:!0}),t}(e,()=>ze(v));v=d?Object.assign({options:[...w(v&&v.options||[]),{ref:e,mutationWatcher:r}],ref:{type:i,name:s}},u):Object.assign(Object.assign({},o),{mutationWatcher:r})}else v=o;f[s]=v;const R=V(C(ve.current,s));if(P(J.current)&&R||(b=C(R?J.current:ve.current,s),p=V(b),h=ie(Re.current,s),p||h||Ae(v,b)),l&&!h&&Ce.current.isValid?Ie():P(u)||($.current.add(s),!ke&&Ce.current.isValid&&Z(m,we,v,ve).then(e=>{const r=G.current;P(e)?H.current.add(s):G.current=!1,r!==G.current&&Se()})),!(Q.current[s]||h&&p)){const e=T(m,s,ve);Q.current[s]=p?O(e)?Object.assign({},e):e:b}i&&function({ref:e},u,s){r(e)&&s&&(e.addEventListener(u?n:c,s),e.addEventListener(t,s))}(d&&v.options?v.options[v.options.length-1]:v,d||"select-one"===e.type,me.current)}const Ge=e.useCallback((e,r)=>async t=>{t&&t.preventDefault&&(t.preventDefault(),t.persist());let n={},c=_(m,ve);Ce.current.isSubmitting&&(be.current=!0,Se());try{if(Oe.current){const{errors:e,values:r}=await Oe.current(c,pe.current,we);p.current=e,n=e,c=r}else for(const e of Object.values(m.current))if(e){const{ref:{name:r}}=e,t=await Z(m,we,e,ve);t[r]?(x(n,r,t[r]),H.current.delete(r)):$.current.has(r)&&(I(p.current,r),H.current.add(r))}P(n)&&Object.keys(p.current).every(e=>Object.keys(m.current).includes(e))?(p.current={},Se(),await e(c,t)):(p.current=Object.assign(Object.assign({},p.current),n),r&&await r(n,t),g&&((e,r)=>{for(const t in e)if(C(r,t)){const r=e[t];if(r){if(r.ref.focus){r.ref.focus();break}if(r.options){r.options[0].ref.focus();break}}}})(m.current,n))}finally{se.current=!0,be.current=!1,he.current=he.current+1,Se()}},[g,we]);e.useEffect(()=>(X.current=!1,()=>{X.current=!0,m.current&&Object.values(m.current).forEach(e=>ze(e,!0))}),[ze]),!l&&Ce.current.isValid&&(G.current=H.current.size>=$.current.size&&P(p.current));const Je={dirtyFields:F.current,isSubmitted:se.current,submitCount:he.current,touched:R.current,isDirty:ge.current,isSubmitting:be.current,isValid:ke?se.current&&P(p.current):G.current},Ke={trigger:Ne,setValue:e.useCallback((function(e,r,t={}){const n=Te(e,r,t)||Me(e);Pe(e),n&&Se(),t.shouldValidate&&Ne(e)}),[Se,Te,Ne]),getValues:e.useCallback(He,[]),register:e.useCallback((function(e,r){if(!le)if(z(e))Ue({name:e},r);else{if(!O(e)||!("name"in e))return r=>r&&Ue(r,e);Ue(e,r)}}),[J.current]),unregister:e.useCallback((function(e){(y(e)?e:[e]).forEach(e=>ze(m.current[e],!0))}),[]),formState:de?new Proxy(Je,{get:(e,r)=>{if(r in e)return Ce.current[r]=!0,e[r]}}):Je},Qe=Object.assign({removeFieldEventListener:qe,renderWatchedInputs:Pe,watchInternal:_e,reRender:Se,mode:xe.current,reValidateMode:{isReValidateOnBlur:Ee,isReValidateOnChange:Fe},errorsRef:p,touchedFieldsRef:R,fieldsRef:m,isWatchAllRef:Y,watchFieldsRef:S,resetFieldArrayFunctionRef:ye,watchFieldsHookRef:L,watchFieldsHookRenderRef:N,fieldArrayDefaultValues:j,validFieldsRef:H,dirtyFieldsRef:F,fieldsWithValidationRef:$,fieldArrayNamesRef:Re,isDirtyRef:ge,isSubmittedRef:se,readFormStateRef:Ce,defaultValuesRef:J,unmountFieldsStateRef:ve,validateResolver:l?Ie:void 0},Ke);return Object.assign({watch:function(e,r){return _e(e,r)},control:Qe,handleSubmit:Ge,reset:e.useCallback((e,t={})=>{if(fe)for(const e of Object.values(m.current))if(e){const{ref:t,options:n}=e,c=oe(t)&&y(n)?n[0].ref:t;if(r(c))try{c.closest("form").reset();break}catch(e){}}m.current={},J.current=e||Object.assign({},J.current),e&&Pe(""),ve.current=h?{}:e||{},Object.values(ye.current).forEach(e=>K(e)&&e()),(({errors:e,isDirty:r,isSubmitted:t,touched:n,isValid:c,submitCount:u,dirtyFields:s})=>{e||(p.current={}),n||(R.current={}),c||(H.current=new Set,$.current=new Set,G.current=!0),r||(ge.current=!1),s||(F.current={}),t||(se.current=!1),u||(he.current=0),Q.current={},j.current={},S.current=new Set,Y.current=!1})(t),Se()},[]),clearErrors:e.useCallback((function(e){e?(y(e)?e:[e]).forEach(e=>I(p.current,e)):p.current={},Se()}),[]),setError:e.useCallback((function(e,r){G.current=!1,x(p.current,e,Object.assign(Object.assign({},r),{ref:(m.current[e]||{}).ref})),Se()}),[]),errors:p.current},Ke)},exports.useFormContext=be,exports.useWatch=function({control:r,name:t,defaultValue:n}){const c=be(),{watchFieldsHookRef:u,watchFieldsHookRenderRef:s,watchInternal:i,defaultValuesRef:a}=r||c.control,[o,l]=e.useState(V(n)?z(t)?C(a.current,t):y(t)?t.reduce((e,r)=>Object.assign(Object.assign({},e),{[r]:C(a.current,r)}),{}):a.current:n),f=e.useRef(),d=e.useRef(n),g=e.useCallback(()=>l(i(t,d.current,f.current)),[l,i,d,t,f]);return e.useEffect(()=>{const e=f.current=me(),r=s.current,n=u.current;return n[e]=new Set,r[e]=g,i(t,d.current,e),()=>{delete n[e],delete r[e]}},[t,g,s,u,i,d]),V(o)?n:o};
//# sourceMappingURL=index.cjs.production.min.js.map
